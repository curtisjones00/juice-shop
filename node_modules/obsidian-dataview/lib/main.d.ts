import { Component, MarkdownPostProcessorContext, Plugin } from "obsidian";
import { FullIndex } from "./data/index";
import { DataviewSettings } from "./settings";
import { DvAPIInterface } from "./typings/api";
declare module "obsidian" {
    interface Workspace {
        /** Sent to rendered dataview components to tell them to possibly refresh */
        on(name: "dataview:refresh-views", callback: () => void, ctx?: any): EventRef;
    }
    interface MarkdownRenderChild extends Component {
    }
}
export default class DataviewPlugin extends Plugin {
    /** Plugin-wide default settigns. */
    settings: DataviewSettings;
    /** The index that stores all dataview data. */
    index: FullIndex;
    /** External-facing plugin API. */
    api: DvAPIInterface;
    onload(): Promise<void>;
    private debouncedRefresh;
    private updateRefreshSettings;
    onunload(): void;
    /** Register a markdown post processor with the given priority. */
    registerPriorityMarkdownPostProcessor(priority: number, processor: (el: HTMLElement, ctx: MarkdownPostProcessorContext) => Promise<void>): void;
    /** Register a markdown codeblock post processor with the given priority. */
    registerPriorityCodeblockPostProcessor(language: string, priority: number, processor: (source: string, el: HTMLElement, ctx: MarkdownPostProcessorContext) => Promise<void>): void;
    /**
     * Based on the source, generate a dataview view. This works by doing an initial parsing pass, and then adding
     * a long-lived view object to the given component for life-cycle management.
     */
    dataview(source: string, el: HTMLElement, component: Component | MarkdownPostProcessorContext, sourcePath: string): Promise<void>;
    /** Generate a DataviewJS view running the given source in the given element. */
    dataviewjs(source: string, el: HTMLElement, component: Component | MarkdownPostProcessorContext, sourcePath: string): Promise<void>;
    /** Render all dataview inline expressions in the given element. */
    dataviewInline(el: HTMLElement, component: Component | MarkdownPostProcessorContext, sourcePath: string): Promise<void>;
    /** Update plugin settings. */
    updateSettings(settings: Partial<DataviewSettings>): Promise<void>;
    /** Call the given callback when the dataview API has initialized. */
    withApi(callback: (api: DvAPIInterface) => void): void;
}
